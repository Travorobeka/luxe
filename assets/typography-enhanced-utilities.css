/* 
 * Enhanced Typography Utilities - Three-Tier System
 * Luxe Theme Enhancement - Phase 5
 * 
 * This file provides enhanced utility classes and backward compatibility
 * for the three-tier typography system with conditional loading based on settings.
 */

/* ==========================================================================
   CONDITIONAL LOADING BASED ON SETTINGS
   ========================================================================== */

/* Only apply disruptive overrides if enabled */
.typography-disruption-enabled {
  /* This class is added to body when disruption is enabled */
}

.typography-disruption-disabled {
  /* This class is added to body when disruption is disabled */
}

/* ==========================================================================
   ENHANCED UTILITY CLASSES
   ========================================================================== */

/* Size variants for each tier */
.main-heading-xs {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-main-heading-desktop) * 0.6);
  font-weight: var(--font-weight-main-heading);
  line-height: var(--line-height-main-heading-ratio);
  letter-spacing: var(--letter-spacing-main-heading);
  color: rgb(var(--color-heading));
}

.main-heading-sm {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-main-heading-desktop) * 0.8);
  font-weight: var(--font-weight-main-heading);
  line-height: var(--line-height-main-heading-ratio);
  letter-spacing: var(--letter-spacing-main-heading);
  color: rgb(var(--color-heading));
}

.main-heading-lg {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-main-heading-desktop) * 1.2);
  font-weight: var(--font-weight-main-heading);
  line-height: var(--line-height-main-heading-ratio);
  letter-spacing: var(--letter-spacing-main-heading);
  color: rgb(var(--color-heading));
}

.main-heading-xl {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-main-heading-desktop) * 1.4);
  font-weight: var(--font-weight-main-heading);
  line-height: var(--line-height-main-heading-ratio);
  letter-spacing: var(--letter-spacing-main-heading);
  color: rgb(var(--color-heading));
}

.sub-heading-xs {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-sub-heading-desktop) * 0.7);
  font-weight: var(--font-weight-sub-heading);
  line-height: var(--line-height-sub-heading-ratio);
  letter-spacing: var(--letter-spacing-sub-heading);
  color: rgb(var(--color-heading));
}

.sub-heading-sm {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-sub-heading-desktop) * 0.85);
  font-weight: var(--font-weight-sub-heading);
  line-height: var(--line-height-sub-heading-ratio);
  letter-spacing: var(--letter-spacing-sub-heading);
  color: rgb(var(--color-heading));
}

.sub-heading-lg {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-sub-heading-desktop) * 1.15);
  font-weight: var(--font-weight-sub-heading);
  line-height: var(--line-height-sub-heading-ratio);
  letter-spacing: var(--letter-spacing-sub-heading);
  color: rgb(var(--color-heading));
}

.sub-heading-xl {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-sub-heading-desktop) * 1.3);
  font-weight: var(--font-weight-sub-heading);
  line-height: var(--line-height-sub-heading-ratio);
  letter-spacing: var(--letter-spacing-sub-heading);
  color: rgb(var(--color-heading));
}

.body-text-xs {
  font-family: var(--font-stack-body);
  font-size: calc(var(--font-body-text-desktop) * 0.75);
  font-weight: var(--font-weight-body-text);
  line-height: var(--line-height-body-text-ratio);
  letter-spacing: var(--letter-spacing-body-text);
  color: rgb(var(--color-foreground));
}

.body-text-sm {
  font-family: var(--font-stack-body);
  font-size: calc(var(--font-body-text-desktop) * 0.875);
  font-weight: var(--font-weight-body-text);
  line-height: var(--line-height-body-text-ratio);
  letter-spacing: var(--letter-spacing-body-text);
  color: rgb(var(--color-foreground));
}

.body-text-lg {
  font-family: var(--font-stack-body);
  font-size: calc(var(--font-body-text-desktop) * 1.125);
  font-weight: var(--font-weight-body-text);
  line-height: var(--line-height-body-text-ratio);
  letter-spacing: var(--letter-spacing-body-text);
  color: rgb(var(--color-foreground));
}

.body-text-xl {
  font-family: var(--font-stack-body);
  font-size: calc(var(--font-body-text-desktop) * 1.25);
  font-weight: var(--font-weight-body-text);
  line-height: var(--line-height-body-text-ratio);
  letter-spacing: var(--letter-spacing-body-text);
  color: rgb(var(--color-foreground));
}

/* ==========================================================================
   RESPONSIVE VARIANTS
   ========================================================================== */

/* Responsive size variants */
@media screen and (max-width: 1279px) {
  .main-heading-xs { font-size: calc(var(--font-main-heading-tablet) * 0.6); }
  .main-heading-sm { font-size: calc(var(--font-main-heading-tablet) * 0.8); }
  .main-heading-lg { font-size: calc(var(--font-main-heading-tablet) * 1.2); }
  .main-heading-xl { font-size: calc(var(--font-main-heading-tablet) * 1.4); }
  
  .sub-heading-xs { font-size: calc(var(--font-sub-heading-tablet) * 0.7); }
  .sub-heading-sm { font-size: calc(var(--font-sub-heading-tablet) * 0.85); }
  .sub-heading-lg { font-size: calc(var(--font-sub-heading-tablet) * 1.15); }
  .sub-heading-xl { font-size: calc(var(--font-sub-heading-tablet) * 1.3); }
  
  .body-text-xs { font-size: calc(var(--font-body-text-tablet) * 0.75); }
  .body-text-sm { font-size: calc(var(--font-body-text-tablet) * 0.875); }
  .body-text-lg { font-size: calc(var(--font-body-text-tablet) * 1.125); }
  .body-text-xl { font-size: calc(var(--font-body-text-tablet) * 1.25); }
}

@media screen and (max-width: 767px) {
  .main-heading-xs { font-size: calc(var(--font-main-heading-mobile) * 0.6); }
  .main-heading-sm { font-size: calc(var(--font-main-heading-mobile) * 0.8); }
  .main-heading-lg { font-size: calc(var(--font-main-heading-mobile) * 1.2); }
  .main-heading-xl { font-size: calc(var(--font-main-heading-mobile) * 1.4); }
  
  .sub-heading-xs { font-size: calc(var(--font-sub-heading-mobile) * 0.7); }
  .sub-heading-sm { font-size: calc(var(--font-sub-heading-mobile) * 0.85); }
  .sub-heading-lg { font-size: calc(var(--font-sub-heading-mobile) * 1.15); }
  .sub-heading-xl { font-size: calc(var(--font-sub-heading-mobile) * 1.3); }
  
  .body-text-xs { font-size: calc(var(--font-body-text-mobile) * 0.75); }
  .body-text-sm { font-size: calc(var(--font-body-text-mobile) * 0.875); }
  .body-text-lg { font-size: calc(var(--font-body-text-mobile) * 1.125); }
  .body-text-xl { font-size: calc(var(--font-body-text-mobile) * 1.25); }
}

/* ==========================================================================
   CONTEXTUAL VARIANTS
   ========================================================================== */

/* Hero section variants */
.hero-heading {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-main-heading-desktop) * 1.5);
  font-weight: var(--font-weight-main-heading);
  line-height: calc(var(--line-height-main-heading-ratio) * 0.9);
  letter-spacing: var(--letter-spacing-main-heading);
  text-transform: var(--text-transform-main-heading);
  color: rgb(var(--color-heading));
}

.hero-subheading {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-sub-heading-desktop) * 1.2);
  font-weight: var(--font-weight-sub-heading);
  line-height: var(--line-height-sub-heading-ratio);
  letter-spacing: var(--letter-spacing-sub-heading);
  color: rgb(var(--color-heading));
}

/* Card variants */
.card-heading {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: var(--font-sub-heading-desktop);
  font-weight: var(--font-weight-sub-heading);
  line-height: var(--line-height-sub-heading-ratio);
  letter-spacing: var(--letter-spacing-sub-heading);
  color: rgb(var(--color-heading));
}

.card-title {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: calc(var(--font-sub-heading-desktop) * 0.9);
  font-weight: var(--font-weight-sub-heading);
  line-height: var(--line-height-sub-heading-ratio);
  letter-spacing: var(--letter-spacing-sub-heading);
  color: rgb(var(--color-heading));
}

/* Section variants */
.section-heading {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: var(--font-main-heading-desktop);
  font-weight: var(--font-weight-main-heading);
  line-height: var(--line-height-main-heading-ratio);
  letter-spacing: var(--letter-spacing-main-heading);
  text-transform: var(--text-transform-main-heading);
  color: rgb(var(--color-heading));
}

.section-subheading {
  font-family: var(--font-stack-header, var(--font-stack-body));
  font-size: var(--font-sub-heading-desktop);
  font-weight: var(--font-weight-sub-heading);
  line-height: var(--line-height-sub-heading-ratio);
  letter-spacing: var(--letter-spacing-sub-heading);
  color: rgb(var(--color-heading));
}

/* ==========================================================================
   ENHANCED BACKWARD COMPATIBILITY
   ========================================================================== */

/* Gentle override mode - preserve some existing styles */
.typography-disruption-gentle h1,
.typography-disruption-gentle h2 {
  font-size: var(--font-main-heading-desktop);
  font-weight: var(--font-weight-main-heading);
  line-height: var(--line-height-main-heading-ratio);
  color: rgb(var(--color-heading));
}

.typography-disruption-gentle h3,
.typography-disruption-gentle h4 {
  font-size: var(--font-sub-heading-desktop);
  font-weight: var(--font-weight-sub-heading);
  line-height: var(--line-height-sub-heading-ratio);
  color: rgb(var(--color-heading));
}

.typography-disruption-gentle h5,
.typography-disruption-gentle h6 {
  font-size: var(--font-body-text-desktop);
  font-weight: var(--font-weight-body-text);
  line-height: var(--line-height-body-text-ratio);
  color: rgb(var(--color-foreground));
}

/* Moderate override mode - override most styles */
.typography-disruption-moderate h1,
.typography-disruption-moderate h2 {
  font-size: var(--font-main-heading-desktop) !important;
  font-weight: var(--font-weight-main-heading) !important;
  line-height: var(--line-height-main-heading-ratio) !important;
  color: rgb(var(--color-heading)) !important;
}

.typography-disruption-moderate h3,
.typography-disruption-moderate h4 {
  font-size: var(--font-sub-heading-desktop) !important;
  font-weight: var(--font-weight-sub-heading) !important;
  line-height: var(--line-height-sub-heading-ratio) !important;
  color: rgb(var(--color-heading)) !important;
}

.typography-disruption-moderate h5,
.typography-disruption-moderate h6 {
  font-size: var(--font-body-text-desktop) !important;
  font-weight: var(--font-weight-body-text) !important;
  line-height: var(--line-height-body-text-ratio) !important;
  color: rgb(var(--color-foreground)) !important;
}

/* Nuclear override mode - force everything */
.typography-disruption-nuclear * {
  font-family: var(--font-stack-body) !important;
}

.typography-disruption-nuclear h1,
.typography-disruption-nuclear h2,
.typography-disruption-nuclear .h1,
.typography-disruption-nuclear .h2,
.typography-disruption-nuclear [class*="heading"],
.typography-disruption-nuclear [class*="title"] {
  font-family: var(--font-stack-header, var(--font-stack-body)) !important;
  font-size: var(--font-main-heading-desktop) !important;
  font-weight: var(--font-weight-main-heading) !important;
  line-height: var(--line-height-main-heading-ratio) !important;
  letter-spacing: var(--letter-spacing-main-heading) !important;
  text-transform: var(--text-transform-main-heading) !important;
  color: rgb(var(--color-heading)) !important;
}

.typography-disruption-nuclear h3,
.typography-disruption-nuclear h4,
.typography-disruption-nuclear .h3,
.typography-disruption-nuclear .h4 {
  font-family: var(--font-stack-header, var(--font-stack-body)) !important;
  font-size: var(--font-sub-heading-desktop) !important;
  font-weight: var(--font-weight-sub-heading) !important;
  line-height: var(--line-height-sub-heading-ratio) !important;
  letter-spacing: var(--letter-spacing-sub-heading) !important;
  text-transform: var(--text-transform-sub-heading) !important;
  color: rgb(var(--color-heading)) !important;
}

.typography-disruption-nuclear h5,
.typography-disruption-nuclear h6,
.typography-disruption-nuclear .h5,
.typography-disruption-nuclear .h6,
.typography-disruption-nuclear p,
.typography-disruption-nuclear span,
.typography-disruption-nuclear div {
  font-family: var(--font-stack-body) !important;
  font-size: var(--font-body-text-desktop) !important;
  font-weight: var(--font-weight-body-text) !important;
  line-height: var(--line-height-body-text-ratio) !important;
  letter-spacing: var(--letter-spacing-body-text) !important;
  color: rgb(var(--color-foreground)) !important;
}

/* ==========================================================================
   MIGRATION HELPERS
   ========================================================================== */

/* Classes to help migrate from old system */
.migrate-to-main-heading {
  font-family: var(--font-stack-header, var(--font-stack-body)) !important;
  font-size: var(--font-main-heading-desktop) !important;
  font-weight: var(--font-weight-main-heading) !important;
  line-height: var(--line-height-main-heading-ratio) !important;
  letter-spacing: var(--letter-spacing-main-heading) !important;
  color: rgb(var(--color-heading)) !important;
}

.migrate-to-sub-heading {
  font-family: var(--font-stack-header, var(--font-stack-body)) !important;
  font-size: var(--font-sub-heading-desktop) !important;
  font-weight: var(--font-weight-sub-heading) !important;
  line-height: var(--line-height-sub-heading-ratio) !important;
  letter-spacing: var(--letter-spacing-sub-heading) !important;
  color: rgb(var(--color-heading)) !important;
}

.migrate-to-body-text {
  font-family: var(--font-stack-body) !important;
  font-size: var(--font-body-text-desktop) !important;
  font-weight: var(--font-weight-body-text) !important;
  line-height: var(--line-height-body-text-ratio) !important;
  letter-spacing: var(--letter-spacing-body-text) !important;
  color: rgb(var(--color-foreground)) !important;
}

/* ==========================================================================
   DEVELOPER TOOLS
   ========================================================================== */

/* Visual debugging in development */
.shopify-design-mode .migrate-to-main-heading::before {
  content: "🔄 Migrating to Main Heading";
  display: block;
  font-size: 10px;
  color: #ff6b35;
  font-weight: normal;
  margin-bottom: 4px;
  opacity: 0.8;
}

.shopify-design-mode .migrate-to-sub-heading::before {
  content: "🔄 Migrating to Sub Heading";
  display: block;
  font-size: 10px;
  color: #ff6b35;
  font-weight: normal;
  margin-bottom: 4px;
  opacity: 0.8;
}

.shopify-design-mode .migrate-to-body-text::before {
  content: "🔄 Migrating to Body Text";
  display: block;
  font-size: 10px;
  color: #ff6b35;
  font-weight: normal;
  margin-bottom: 4px;
  opacity: 0.8;
}

/* Typography system status indicator */
.shopify-design-mode .typography-system-status {
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 8px 12px;
  border-radius: 4px;
  font-size: 12px;
  z-index: 9999;
  font-family: monospace;
}

.shopify-design-mode .typography-system-status::before {
  content: "✅ Three-Tier Typography Active";
}

/* ==========================================================================
   PERFORMANCE OPTIMIZATIONS
   ========================================================================== */

/* Optimize font loading for enhanced utilities */
.main-heading-xs, .main-heading-sm, .main-heading-lg, .main-heading-xl,
.sub-heading-xs, .sub-heading-sm, .sub-heading-lg, .sub-heading-xl,
.body-text-xs, .body-text-sm, .body-text-lg, .body-text-xl,
.hero-heading, .hero-subheading, .card-heading, .card-title,
.section-heading, .section-subheading {
  font-display: var(--font-display-strategy, swap);
  contain: layout style;
}

/* Prevent layout shifts during font loading */
.main-heading, .sub-heading, .body-text,
.main-heading-xs, .main-heading-sm, .main-heading-lg, .main-heading-xl,
.sub-heading-xs, .sub-heading-sm, .sub-heading-lg, .sub-heading-xl,
.body-text-xs, .body-text-sm, .body-text-lg, .body-text-xl {
  font-size-adjust: 0.5;
}

/* ==========================================================================
   ACCESSIBILITY ENHANCEMENTS
   ========================================================================== */

/* Ensure proper focus styles for all typography utilities */
.main-heading:focus, .sub-heading:focus, .body-text:focus,
.main-heading-xs:focus, .main-heading-sm:focus, .main-heading-lg:focus, .main-heading-xl:focus,
.sub-heading-xs:focus, .sub-heading-sm:focus, .sub-heading-lg:focus, .sub-heading-xl:focus,
.body-text-xs:focus, .body-text-sm:focus, .body-text-lg:focus, .body-text-xl:focus {
  outline: 2px solid rgb(var(--color-button));
  outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .main-heading, .sub-heading, .body-text,
  .main-heading-xs, .main-heading-sm, .main-heading-lg, .main-heading-xl,
  .sub-heading-xs, .sub-heading-sm, .sub-heading-lg, .sub-heading-xl,
  .body-text-xs, .body-text-sm, .body-text-lg, .body-text-xl {
    text-shadow: none !important;
    font-weight: 600 !important;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .main-heading, .sub-heading, .body-text,
  .main-heading-xs, .main-heading-sm, .main-heading-lg, .main-heading-xl,
  .sub-heading-xs, .sub-heading-sm, .sub-heading-lg, .sub-heading-xl,
  .body-text-xs, .body-text-sm, .body-text-lg, .body-text-xl {
    transition: none !important;
    animation: none !important;
  }
}

