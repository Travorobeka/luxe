{% comment %}
  Enhanced Footer Section
  - All features from footer.md implemented as drag-and-droppable blocks
  - Each major feature is a block type
  - All settings and customizations from footer.md included
  - Clearly commented and separated for easy testing
  - Shopify 2.0 section best practices
{% endcomment %}

<!-- Enhanced Footer CSS -->
<style>
.footer-enhanced {
  padding: 40px 0 0 0;
  background: #f7f7f7;
  color: #333;
  font-size: 14px;
  line-height: 1.6;
}
.footer-enhanced__container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}
.footer-enhanced__newsletter,
.footer-enhanced__company-info,
.footer-enhanced__menu,
.footer-enhanced__contact,
.footer-enhanced__social,
.footer-enhanced__payment-icons {
  margin-bottom: 32px;
}
.footer-enhanced__newsletter-title,
.footer-enhanced__company-title,
.footer-enhanced__menu-title,
.footer-enhanced__contact-title {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 12px;
  color: #000;
}
.footer-enhanced__newsletter-form {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}
.footer-enhanced__newsletter-input {
  flex: 1;
  padding: 10px 14px;
  border: 1px solid #e5e5e5;
  border-radius: 4px;
  background: #fff;
  color: #333;
}
.footer-enhanced__newsletter-button {
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  background: #000;
  color: #fff;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}
.footer-enhanced__newsletter-button:hover {
  background: #222;
}
.footer-enhanced__newsletter-error {
  color: #d82c0d;
  font-size: 13px;
  margin-bottom: 8px;
}
.footer-enhanced__newsletter-success {
  color: #008060;
  font-size: 13px;
  margin-bottom: 8px;
}
.footer-enhanced__company-logo {
  max-width: 120px;
  height: auto;
  margin-bottom: 10px;
  display: block;
}
.footer-enhanced__company-text,
.footer-enhanced__contact-text {
  margin-top: 8px;
  color: #555;
}
.footer-enhanced__menu-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
  transition: max-height 0.4s, opacity 0.3s;
  max-height: 1000px;
  opacity: 1;
}
.footer-enhanced__menu-list.fade {
  transition: opacity 0.3s;
  opacity: 0;
  max-height: 0;
  pointer-events: none;
}
.footer-enhanced__menu-list.fade.active {
  opacity: 1;
  max-height: 1000px;
  pointer-events: auto;
}
.footer-enhanced__menu-list.slide {
  transition: max-height 0.4s cubic-bezier(0.4,0,0.2,1), opacity 0.3s;
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  pointer-events: none;
}
.footer-enhanced__menu-list.slide.active {
  max-height: 1000px;
  opacity: 1;
  pointer-events: auto;
}
.footer-enhanced__menu-item a {
  color: #333;
  text-decoration: none;
  transition: color 0.2s;
}
.footer-enhanced__menu-item a:hover {
  color: #000f9f;
}
.footer-enhanced__social {
  display: flex;
  gap: 16px;
  margin-top: 10px;
}
.footer-enhanced__social-link {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 18px;
  background: #eee;
  color: #333;
  transition: all 0.2s;
}
.footer-enhanced__social-link:hover {
  background: #000;
  color: #fff;
  transform: scale(1.1);
}
.footer-enhanced__payment-icons {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}
.footer-enhanced__payment-icon {
  height: auto;
  display: inline-block;
  vertical-align: middle;
}
.footer-enhanced__bottom {
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-top: 1px solid #e5e5e5;
  padding: 20px 0 0 0;
  margin-top: 20px;
  font-size: 13px;
}
.footer-enhanced__copyright {
  color: #888;
}
@media (max-width: 767px) {
  .footer-enhanced__container {
    padding: 0 8px;
  }
  .footer-enhanced__bottom {
    flex-direction: column;
    gap: 10px;
    text-align: center;
  }
  .footer-enhanced__newsletter-form {
    flex-direction: column;
  }
  .footer-enhanced__social {
    justify-content: center;
  }
}
</style>

<footer class="footer-enhanced" data-section-id="{{ section.id }}">
  <div class="footer-enhanced__container">
    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'newsletter' %}
          <!-- Newsletter Section -->
          {% render 'footer-enhanced-newsletter', block: block %}
        {% when 'company_info' %}
          <!-- Company Info Section -->
          {% render 'footer-enhanced-company-info', block: block %}
        {% when 'menu' %}
          <!-- Menu Section -->
          {% render 'footer-enhanced-menu', block: block %}
        {% when 'contact' %}
          <!-- Contact Section -->
          {% render 'footer-enhanced-contact', block: block %}
        {% when 'social' %}
          <!-- Social Icons Section -->
          {% render 'footer-enhanced-social', block: block %}
        {% when 'payment' %}
          <!-- Payment Icons Section -->
          {% render 'footer-enhanced-payment', block: block %}
        {% when 'custom_html' %}
          <!-- Custom HTML Section -->
          <div class="footer-enhanced__custom-html">{{ block.settings.html }}</div>
        {% when 'spacer' %}
          <!-- Spacer Section -->
          <div style="height: {{ block.settings.height }}px;"></div>
        {% else %}
          <!-- Unknown block type -->
      {% endcase %}
    {% endfor %}
    <!-- Footer Bottom Bar (copyright, payment, etc.) -->
    <div class="footer-enhanced__bottom">
      <div class="footer-enhanced__copyright">{{ section.settings.copyright_text }}</div>
      {% if section.settings.show_payment_icons %}
        <div class="footer-enhanced__payment-icons">
          {% for type in shop.enabled_payment_types %}
            {{ type | payment_type_svg_tag: class: 'footer-enhanced__payment-icon' }}
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</footer>

<!-- Enhanced Footer JS -->
<script>
(function() {
  // Dropdown/collapse for menu blocks (mobile)
  function toggleMenu(menuBlock, animation) {
    var list = menuBlock.querySelector('.footer-enhanced__menu-list');
    if (!list) return;
    if (animation === 'fade') {
      list.classList.toggle('fade');
      list.classList.toggle('active');
    } else if (animation === 'slide') {
      list.classList.toggle('slide');
      list.classList.toggle('active');
    } else {
      list.classList.toggle('active');
    }
  }
  document.querySelectorAll('.footer-enhanced__menu').forEach(function(menuBlock) {
    var title = menuBlock.querySelector('.footer-enhanced__menu-title');
    var list = menuBlock.querySelector('.footer-enhanced__menu-list');
    var animation = list && list.classList.contains('fade') ? 'fade' : (list && list.classList.contains('slide') ? 'slide' : 'none');
    if (title && list) {
      title.style.cursor = 'pointer';
      title.addEventListener('click', function() {
        if (window.innerWidth <= 767) {
          toggleMenu(menuBlock, animation);
        }
      });
    }
    // On resize, reset menu state
    window.addEventListener('resize', function() {
      if (window.innerWidth > 767) {
        list.classList.add('active');
      } else {
        list.classList.remove('active');
      }
    });
  });
  // On load, set menu state
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.footer-enhanced__menu-list').forEach(function(list) {
      if (window.innerWidth > 767) {
        list.classList.add('active');
      } else {
        list.classList.remove('active');
      }
    });
  });
})();
</script>

{% schema %}
{
  "name": "Enhanced Footer (Drag & Drop)",
  "settings": [
    {
      "type": "richtext",
      "id": "copyright_text",
      "label": "Copyright text",
      "default": "<p>Â© 2023 Your Store. All rights reserved.</p>"
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "Show payment icons in bottom bar",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "newsletter",
      "name": "Newsletter",
      "settings": [
        { "type": "text", "id": "title", "label": "Title", "default": "Subscribe to our newsletter" },
        { "type": "text", "id": "text", "label": "Text", "default": "Sign up for exclusive offers, original stories, events and more." },
        { "type": "text", "id": "placeholder", "label": "Email placeholder", "default": "Your email address" },
        { "type": "text", "id": "button_text", "label": "Button text", "default": "Subscribe" },
        { "type": "checkbox", "id": "show_name", "label": "Show name field", "default": false },
        { "type": "text", "id": "success_message", "label": "Success message", "default": "Thank you for subscribing!" },
        { "type": "text", "id": "error_message", "label": "Error message", "default": "There was an error. Please try again." }
      ]
    },
    {
      "type": "company_info",
      "name": "Company Info",
      "settings": [
        { "type": "text", "id": "title", "label": "Company title", "default": "About Us" },
        { "type": "image_picker", "id": "logo", "label": "Company logo" },
        { "type": "richtext", "id": "info", "label": "Company information", "default": "<p>We're dedicated to providing quality products and exceptional service to our customers.</p>" }
      ]
    },
    {
      "type": "menu",
      "name": "Menu",
      "settings": [
        { "type": "link_list", "id": "menu", "label": "Menu" },
        { "type": "text", "id": "title", "label": "Menu title", "default": "Menu" },
        { "type": "select", "id": "dropdown_animation", "label": "Dropdown animation", "options": [ { "value": "none", "label": "None" }, { "value": "fade", "label": "Fade" }, { "value": "slide", "label": "Slide" } ], "default": "none" }
      ]
    },
    {
      "type": "contact",
      "name": "Contact Info",
      "settings": [
        { "type": "text", "id": "title", "label": "Contact title", "default": "Contact Us" },
        { "type": "richtext", "id": "info", "label": "Contact information", "default": "<p>123 Main Street<br>New York, NY 10001<br>Email: hello@example.com</p>" }
      ]
    },
    {
      "type": "social",
      "name": "Social Icons",
      "settings": [
        { "type": "checkbox", "id": "show_facebook", "label": "Show Facebook", "default": true },
        { "type": "url", "id": "facebook_link", "label": "Facebook URL" },
        { "type": "checkbox", "id": "show_twitter", "label": "Show Twitter", "default": true },
        { "type": "url", "id": "twitter_link", "label": "Twitter URL" },
        { "type": "checkbox", "id": "show_instagram", "label": "Show Instagram", "default": true },
        { "type": "url", "id": "instagram_link", "label": "Instagram URL" },
        { "type": "checkbox", "id": "show_youtube", "label": "Show YouTube", "default": true },
        { "type": "url", "id": "youtube_link", "label": "YouTube URL" }
      ]
    },
    {
      "type": "payment",
      "name": "Payment Icons",
      "settings": [
        { "type": "range", "id": "icon_size", "label": "Icon size", "min": 20, "max": 60, "step": 2, "default": 30 }
      ]
    },
    {
      "type": "custom_html",
      "name": "Custom HTML",
      "settings": [
        { "type": "liquid", "id": "html", "label": "HTML" }
      ]
    },
    {
      "type": "spacer",
      "name": "Spacer",
      "settings": [
        { "type": "range", "id": "height", "label": "Height (px)", "min": 10, "max": 100, "step": 5, "default": 40 }
      ]
    }
  ],
  "presets": [
    { "name": "Enhanced Footer (Drag & Drop)", "blocks": [ { "type": "newsletter" }, { "type": "company_info" }, { "type": "menu" }, { "type": "contact" }, { "type": "social" }, { "type": "payment" } ] }
  ]
}
{% endschema %} 