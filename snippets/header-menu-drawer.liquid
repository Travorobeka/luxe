{% liquid
  assign main_menu = section.settings.main_menu
  assign mobile_menu = section.settings.mobile_menu

  if mobile_menu == blank
    assign menu = main_menu
  else
    assign menu = mobile_menu
  endif
%}
<div id="m-menu-drawer" class="m-menu-drawer">
  <div class="m-menu-drawer__bg" style="
    position: absolute; inset: 0; z-index: 0;
    background-color: #fff;
  "></div>
  <div class="m-menu-drawer__backdrop"></div>
  <div class="m-menu-drawer__wrapper">
    <!-- Custom close button removed: all close icon customizations will be applied to the hamburger/close icon in the header -->
    <div class="m-menu-drawer__content" style="
      padding-left: {{ section.settings.mb_drawer_padding_x | default: 24 }}px;
      padding-right: {{ section.settings.mb_drawer_padding_x | default: 24 }}px;
      padding-top: {{ section.settings.mb_drawer_padding_y | default: 24 }}px;
      padding-bottom: {{ section.settings.mb_drawer_padding_y | default: 24 }}px;
      position: relative;
      z-index: 1;
    ">
      <ul class="m-menu-drawer__navigation m-menu-mobile m-footer--accordion">
        {% for link in linklists[menu].links %}
          <li class="m-accordion--item">
            <div class="m-accordion--item-button m-menu-mobile__link"
              style="
                background: {{ section.settings.mb_menu_bg | default: '#fff' }};
                padding: {{ section.settings.mb_menu_padding_v | default: 12 }}px {{ section.settings.mb_menu_padding_h | default: 16 }}px;
                border-radius: {{ section.settings.mb_menu_radius | default: 8 }}px;
                font-size: {{ section.settings.mb_menu_font_size | default: 16 }}px;
                font-weight: {{ section.settings.mb_menu_font_weight | default: 500 }};
                display: flex; align-items: center; justify-content: space-between;
              "
            >
              <span>{{ link.title }}</span>
              <span class="m-accordion--item-icon">
                {% case section.settings.mb_menu_accordion_icon_style %}
                  {% when 'caret' %}
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  {% when 'arrow' %}
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 4L10 8L6 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  {% when 'plus' %}
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 4V12M4 8H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  {% when 'custom' %}
                    {{ section.settings.mb_menu_accordion_icon_svg }}
                  {% else %}
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                {% endcase %}
              </span>
            </div>
            {% if link.links != blank %}
              <div class="m-accordion--item-content">
                <ul class="m-link-lists">
                  {% for child in link.links %}
                    <li class="m-link-lists--item" style="padding-left: {{ section.settings.mb_menu_sub_indent | default: 16 }}px;">
                      <a href="{{ child.url }}" class="m-link">{{ child.title }}</a>
                    </li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
      {% render 'mega-menu-customer', section: section %}
    </div>
  </div>
</div>
