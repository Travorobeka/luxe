{%- liquid
  if show_label == null
    assign show_label = false
  endif
  if size == null
    if icon_size != null
      assign size = ''
    else
      assign size = 'm-svg-icon'
    endif
  endif
  assign icon_style = ''
  if icon_size != null
    assign icon_style = icon_style | append: 'width:' | append: icon_size | append: 'px;'
  endif
  if icon_height != null
    assign icon_style = icon_style | append: 'height:' | append: icon_height | append: 'px;'
  endif
  if icon_color != null
    assign icon_style = icon_style | append: 'color:' | append: icon_color | append: ';fill:' | append: icon_color | append: ';'
  endif
  assign icon_gap_style = ''
  if icon_gap != null
    assign icon_gap_style = 'gap:' | append: icon_gap | append: 'px;'
  endif
  assign icon_bg_style = ''
  if settings.social_icon_bg_color != blank
    assign icon_bg_style = icon_bg_style | append: 'background-color:' | append: settings.social_icon_bg_color | append: ';'
  endif
  if settings.social_icon_bg_radius != blank
    assign icon_bg_style = icon_bg_style | append: 'border-radius:' | append: settings.social_icon_bg_radius | append: 'px;'
  endif
  if settings.social_icon_border_color != blank and settings.social_icon_border_width > 0
    assign icon_bg_style = icon_bg_style | append: 'border:' | append: settings.social_icon_border_width | append: 'px solid ' | append: settings.social_icon_border_color | append: ';'
  endif
  if settings.social_icon_shadow_blur > 0
    assign icon_bg_style = icon_bg_style | append: 'box-shadow: 0 2px ' | append: settings.social_icon_shadow_blur | append: 'px ' | append: settings.social_icon_shadow_color | append: ';'
  endif
  assign icon_anim_class = ''
  if settings.social_icon_hover_animation != 'none'
    assign icon_anim_class = 'social-anim--' | append: settings.social_icon_hover_animation
  endif
  assign link_target = '_self'
  if settings.social_open_in_new_tab
    assign link_target = '_blank'
  endif
  assign utm = ''
  if settings.social_add_utm
    assign utm = '?utm_source=shop&utm_medium=social'
  endif
-%}
<div class="social-media-links {{ icon_anim_class }} align-{{ settings.social_alignment }} {{ extra_classes }}" style="{{ icon_gap_style }}">
  <style>
    {% if icon_color_hover %}
      .social-media-links--item:hover svg { color: {{ icon_color_hover }} !important; fill: {{ icon_color_hover }} !important; }
    {% endif %}
  </style>
  {% comment %} Render all social platforms, including new ones {% endcomment %}
  {% assign platforms = "pinterest,facebook,instagram,twitter,linkedin,snapchat,tumblr,youtube,vimeo,tiktok,discord,whatsapp,spotify,threads,telegram,reddit,wechat,weibo,vk,xing,medium" | split: "," %}
  {% for platform in platforms %}
    {% assign link_key = 'social_' | append: platform | append: '_link' %}
    {% assign label_key = 'social_' | append: platform | append: '_label' %}
    {% assign link = settings[link_key] %}
    {% assign label = settings[label_key] | default: platform | capitalize %}
    {% if link != blank %}
      <a
        target="{{ link_target }}"
        class="social-media-links--item"
        href="{{ link }}{{ utm }}"
        rel="noreferrer"
        aria-label="{{ label }}"
        style="{{ icon_bg_style }}"
        {% if settings.social_enable_tracking %}onclick="window.dataLayer && dataLayer.push({event: 'social_click', social: '{{ platform }}'});"{% endif %}
      >
        {% render 'social-icon', platform: platform, size: size, style: icon_style %}
        {% if label != blank and show_label %}
          <span class="social-media-links--label">{{ label }}</span>
        {% endif %}
      </a>
    {% endif %}
  {% endfor %}
  {% if settings.social_custom_url != blank and settings.social_custom_icon != blank %}
    <a
      target="{{ link_target }}"
      class="social-media-links--item"
      href="{{ settings.social_custom_url }}{{ utm }}"
      rel="noreferrer"
      aria-label="{{ settings.social_custom_label | default: 'Custom' }}"
      style="{{ icon_bg_style }}"
      {% if settings.social_enable_tracking %}onclick="window.dataLayer && dataLayer.push({event: 'social_click', social: 'custom'});"{% endif %}
    >
      <img src="{{ settings.social_custom_icon | img_url: '32x32' }}" alt="{{ settings.social_custom_label | default: 'Custom' }}" style="width:{{ icon_size | default: 32 }}px;height:auto;" />
      {% if settings.social_custom_label != blank and show_label %}
        <span class="social-media-links--label">{{ settings.social_custom_label }}</span>
      {% endif %}
    </a>
  {% endif %}
</div>
