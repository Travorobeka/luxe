{% liquid
  assign custom_css = settings.custom_css
  assign typography_source = settings.typography_source | default: 'shopify'

  # Get font sizes from new three-tier typography system
  assign body_font_size = settings.body_font_size | default: 16
  assign main_heading_font_size = settings.main_heading_font_size | default: 42
  assign sub_heading_font_size = settings.sub_heading_font_size | default: 24
  
  # Map legacy H1-H6 settings to new three-tier system for backward compatibility
  assign h1_font_size = main_heading_font_size
  assign h2_font_size = main_heading_font_size
  assign h3_font_size = sub_heading_font_size
  assign h4_font_size = sub_heading_font_size
  assign h5_font_size = body_font_size
  assign h6_font_size = body_font_size
  
  # Get font weights from new three-tier typography system
  assign body_font_weight = settings.body_font_weight | default: 400
  assign main_heading_font_weight = settings.main_heading_font_weight | default: 700
  assign sub_heading_font_weight = settings.sub_heading_font_weight | default: 600
  
  # Map legacy H1-H6 weights to new three-tier system for backward compatibility
  assign h1_font_weight = main_heading_font_weight
  assign h2_font_weight = main_heading_font_weight
  assign h3_font_weight = sub_heading_font_weight
  assign h4_font_weight = sub_heading_font_weight
  assign h5_font_weight = body_font_weight
  assign h6_font_weight = body_font_weight
  
  # Get line heights from new three-tier typography system
  assign body_line_height = settings.body_line_height | default: 1.6
  assign main_heading_line_height = settings.main_heading_line_height | default: 1.2
  assign sub_heading_line_height = settings.sub_heading_line_height | default: 1.3
  
  # Map legacy H1-H6 line heights to new three-tier system for backward compatibility
  assign h1_line_height = main_heading_line_height
  assign h2_line_height = main_heading_line_height
  assign h3_line_height = sub_heading_line_height
  assign h4_line_height = sub_heading_line_height
  assign h5_line_height = body_line_height
  assign h6_line_height = body_line_height
  
  # Get letter spacing from new three-tier typography system
  assign body_letter_spacing = settings.body_letter_spacing | default: 0
  assign main_heading_letter_spacing = settings.main_heading_letter_spacing | default: 0
  assign sub_heading_letter_spacing = settings.sub_heading_letter_spacing | default: 0
  
  # Map legacy H1-H6 letter spacing to new three-tier system for backward compatibility
  assign h1_letter_spacing = main_heading_letter_spacing
  assign h2_letter_spacing = main_heading_letter_spacing
  assign h3_letter_spacing = sub_heading_letter_spacing
  assign h4_letter_spacing = sub_heading_letter_spacing
  assign h5_letter_spacing = body_letter_spacing
  assign h6_letter_spacing = body_letter_spacing
  
  # Legacy support for existing settings
  if typography_source == 'shopify'
    assign font_body_base = settings.type_base_size | default: body_font_size
    assign body_font_size = font_body_base
    assign h1_font_size = settings.h1_font_size | default: h1_font_size
    assign h2_font_size = settings.h2_font_size | default: h2_font_size
    assign h3_font_size = settings.type_header_base_size | default: h3_font_size
    assign h4_font_size = settings.h4_font_size | default: h4_font_size
  endif

  assign enable_rtl = settings.enable_rtl
  assign language_support_rtl = settings.language_support_rtl
  if enable_rtl and language_support_rtl != blank
    assign shop_locale = localization.language.iso_code
    assign language_support_rtl_list = language_support_rtl | split: ','
    assign is_rtl = language_support_rtl_list | where: shop_locale
    if is_rtl.size > 0
      assign enable_rtl = true
    else
      assign enable_rtl = false
    endif
  endif

  assign blocks_radius = 0
  assign medium_blocks_radius = 0
  case settings.blocks_corner_radius
    when 'round'
      assign blocks_radius = 10
      assign medium_blocks_radius = 5
  endcase

  assign pcard_radius = 0

  case settings.pcard_corner_radius
    when 'round'
      assign pcard_radius = 10
  endcase
%}

{%- style -%}
   {% for scheme in settings.color_schemes -%}
  	{% assign scheme_classes = scheme_classes | append: '.m-color-' | append: scheme.id | append: ', ' %}
  	{%- if forloop.index == 1 -%}
  		:root,
  	{%- endif -%}
  	.m-color-{{ scheme.id }} {
      --color-background: {{ scheme.settings.background.red }},{{ scheme.settings.background.green }},{{ scheme.settings.background.blue }};
      --color-background-secondary: {{ scheme.settings.background_secondary.red }},{{ scheme.settings.background_secondary.green }},{{ scheme.settings.background_secondary.blue }};
  		{% if scheme.settings.background_gradient != empty %}
  	  --gradient-background: {{ scheme.settings.background_gradient }};
  		{% else %}
  	  --gradient-background: {{ scheme.settings.background }};
  		{% endif %}
  		--color-foreground: {{ scheme.settings.text.red }},{{ scheme.settings.text.green }},{{ scheme.settings.text.blue }};
  		--color-foreground-secondary: {{ scheme.settings.subtext.red }},{{ scheme.settings.subtext.green }},{{ scheme.settings.subtext.blue }};
      --color-heading: {{ scheme.settings.heading_text.red }},{{ scheme.settings.heading_text.green }},{{ scheme.settings.heading_text.blue }};
  		--color-button: {{ scheme.settings.button.red }},{{ scheme.settings.button.green }},{{ scheme.settings.button.blue }};
  		--color-button-text: {{ scheme.settings.button_label.red }},{{ scheme.settings.button_label.green }},{{ scheme.settings.button_label.blue }};
  		--color-outline-button: {{ scheme.settings.outline_button_label.red }},{{ scheme.settings.outline_button_label.green }},{{ scheme.settings.outline_button_label.blue }};
      --color-button-hover: {{ scheme.settings.button_hover.red }}, {{ scheme.settings.button_hover.green }}, {{ scheme.settings.button_hover.blue }};
      --color-button-text-hover: {{ scheme.settings.button_text_hover.red }}, {{ scheme.settings.button_text_hover.green }}, {{ scheme.settings.button_text_hover.blue }};
  		--color-border: {{ scheme.settings.border.red }},{{ scheme.settings.border.green }},{{ scheme.settings.border.blue }};
  		--color-price-sale: {{ scheme.settings.price_sale.red }},{{ scheme.settings.price_sale.green }},{{ scheme.settings.price_sale.blue }};
  		--color-price-regular: {{ scheme.settings.price_regular.red }},{{ scheme.settings.price_regular.green }},{{ scheme.settings.price_regular.blue }};
  		--color-form-field: {{ scheme.settings.form_field.red }},{{ scheme.settings.form_field.green }},{{ scheme.settings.form_field.blue }};
  		--color-form-field-text: {{ scheme.settings.form_field_label.red }},{{ scheme.settings.form_field_label.green }},{{ scheme.settings.form_field_label.blue }};
  		--color-tooltip: {{ scheme.settings.tooltip.red }},{{ scheme.settings.tooltip.green }},{{ scheme.settings.tooltip.blue }};
  		--color-tooltip-text: {{ scheme.settings.tooltip_label.red }},{{ scheme.settings.tooltip_label.green }},{{ scheme.settings.tooltip_label.blue }};
  	}
  {% endfor %}
  {{ scheme_classes | remove_last: ', ' }} {
  	color: rgb(var(--color-foreground));
  	background-color: rgb(var(--color-background));
  }
   {%- capture style -%}
  :root {
     /* ANIMATIONS */
  	--m-duration-short: .1s;
     --m-duration-default: .25s;
     --m-duration-long: .5s;
     --m-duration-image: .65s;
     --m-duration-animate: 1s;
     --m-animation-duration: {{ settings.animation_duration | times: 1000 | floor }}ms;
     --m-animation-fade-in-up: m-fade-in-up var(--m-animation-duration) cubic-bezier(0, 0, 0.3, 1) forwards;
     --m-animation-fade-in-left: m-fade-in-left var(--m-animation-duration) cubic-bezier(0, 0, 0.3, 1) forwards;
     --m-animation-fade-in-right: m-fade-in-right var(--m-animation-duration) cubic-bezier(0, 0, 0.3, 1) forwards;
     --m-animation-fade-in-left-rtl: m-fade-in-left-rtl var(--m-animation-duration) cubic-bezier(0, 0, 0.3, 1) forwards;
     --m-animation-fade-in-right-rtl: m-fade-in-right-rtl var(--m-animation-duration) cubic-bezier(0, 0, 0.3, 1) forwards;
     --m-animation-fade-in: m-fade-in calc(var(--m-animation-duration) * 2) cubic-bezier(0, 0, 0.3, 1);
     --m-animation-zoom-fade: m-zoom-fade var(--m-animation-duration) ease forwards;

  	/* BODY */
  	--base-line-height: {{ settings.type_base_line_height }};

   /* INPUTS */
   --inputs-border-width: {{ settings.inputs_border_thickness }}px;
  	--inputs-radius: {{ settings.inputs_border_radius }}px;

  	/* BUTTON */
  	--btn-letter-spacing: {{ settings.btn_letter_spacing }}px;
  	--btn-border-radius: {{ settings.btn_border_radius }}px;
  	--btn-border-width: {{ settings.btn_border_width }}px;
  	--btn-line-height: {{ settings.btn_line_height }}px;
  	{% if settings.btn_uppercase_text %}
  	--btn-text-transform: uppercase;
  	{% endif %}

  	/* COUNT BUBBLE */
  	--color-cart-wishlist-count: {{ settings.color_cart_wishlist_count }};
  	--bg-cart-wishlist-count: {{ settings.bg_cart_wishlist_count }};

  	/* OVERLAY */
  	--color-image-overlay: {{ settings.img_overlay_bg }};
  	--opacity-image-overlay: {{ settings.img_overlay_opacity | divided_by: 100.00 }};

  	/* Notification */
  	--color-success: {{ settings.color_success.red }},{{ settings.color_success.green }},{{ settings.color_success.blue }};
  	--color-warning: {{ settings.color_warning.red }},{{ settings.color_warning.green }},{{ settings.color_warning.blue }};
    --color-error: {{ settings.color_error.red }}, {{ settings.color_error.green }}, {{ settings.color_error.blue }};
    --color-error-bg: {{ settings.color_error | color_lighten: 40 }};
    --color-warning-bg: {{ settings.color_warning | color_lighten: 45 }};
    --color-success-bg: {{ settings.color_success | color_lighten: 50 }};

  	/* CUSTOM COLOR */
  	--text-black: 0,0,0;
  	--text-white: 255,255,255;
  	--bg-black: 0,0,0;
  	--bg-white: 255,255,255;
  	--rounded-full: 9999px;
  	--bg-card-placeholder: rgba(243,243,243,1);
  	--arrow-select-box: url({{ 'ar-down.svg' | asset_url }});

  	/* FONT SIZES - New Three-Tier Typography System */
  	--font-base-size: {{ body_font_size }}px;
  	--font-btn-size: {{ settings.btn_base_size }}px;
  	--font-btn-weight: {{ settings.btn_weight }};
  	
  	/* Main Heading Variables */
  	--font-main-heading-desktop: {{ main_heading_font_size }}px;
  	--font-main-heading-tablet: {{ main_heading_font_size | times: 0.80 | floor }}px;
  	--font-main-heading-mobile: {{ main_heading_font_size | times: 0.70 | floor }}px;
  	
  	/* Sub Heading Variables */
  	--font-sub-heading-desktop: {{ sub_heading_font_size }}px;
  	--font-sub-heading-tablet: {{ sub_heading_font_size | times: 0.85 | floor }}px;
  	--font-sub-heading-mobile: {{ sub_heading_font_size | times: 0.75 | floor }}px;
  	
  	/* Body Text Variables */
  	--font-body-text-desktop: {{ body_font_size }}px;
  	--font-body-text-tablet: {{ body_font_size }}px;
  	--font-body-text-mobile: {{ body_font_size }}px;
  	
  	/* Legacy H1-H6 Variables for Backward Compatibility */
  	--font-h1-desktop: {{ h1_font_size }}px;
  	--font-h1-tablet: {{ h1_font_size | times: 0.70 | floor }}px;
  	--font-h1-mobile: {{ h1_font_size | times: 0.60 | floor }}px;
  	--font-h2-desktop: {{ h2_font_size }}px;
  	--font-h2-tablet: {{ h2_font_size | times: 0.80 | floor }}px;
  	--font-h2-mobile: {{ h2_font_size | times: 0.70 | floor }}px;
  	--font-h3-desktop: {{ h3_font_size }}px;
  	--font-h3-tablet: {{ h3_font_size | times: 0.80 | floor }}px;
  	--font-h3-mobile: {{ h3_font_size | times: 0.70 | floor }}px;
  	--font-h4-desktop: {{ h4_font_size }}px;
  	--font-h4-tablet: {{ h4_font_size | times: 0.80 | floor }}px;
  	--font-h4-mobile: {{ h4_font_size | times: 0.80 | floor }}px;
  	--font-h5-desktop: {{ h5_font_size }}px;
  	--font-h5-tablet: {{ h5_font_size | times: 0.80 | floor }}px;
  	--font-h5-mobile: {{ h5_font_size | times: 0.80 | floor }}px;
  	--font-h6-desktop: {{ h6_font_size }}px;
  	--font-h6-tablet: {{ h6_font_size | times: 0.80 | floor }}px;
  	--font-h6-mobile: {{ h6_font_size | times: 0.80 | floor }}px;
  	
  	/* FONT WEIGHTS - New Three-Tier Typography System */
  	--font-weight-body: {{ body_font_weight }};
  	--font-weight-main-heading: {{ main_heading_font_weight }};
  	--font-weight-sub-heading: {{ sub_heading_font_weight }};
  	--font-weight-body-text: {{ body_font_weight }};
  	
  	/* Legacy H1-H6 Font Weights for Backward Compatibility */
  	--font-weight-h1: {{ h1_font_weight }};
  	--font-weight-h2: {{ h2_font_weight }};
  	--font-weight-h3: {{ h3_font_weight }};
  	--font-weight-h4: {{ h4_font_weight }};
  	--font-weight-h5: {{ h5_font_weight }};
  	--font-weight-h6: {{ h6_font_weight }};
  	
  	/* LINE HEIGHTS - New Three-Tier Typography System */
  	--line-height-body: {{ body_font_size | times: body_line_height | round }}px;
  	--line-height-body-ratio: {{ body_line_height }};
  	--line-height-main-heading: {{ main_heading_font_size | times: main_heading_line_height | round }}px;
  	--line-height-main-heading-ratio: {{ main_heading_line_height }};
  	--line-height-sub-heading: {{ sub_heading_font_size | times: sub_heading_line_height | round }}px;
  	--line-height-sub-heading-ratio: {{ sub_heading_line_height }};
  	--line-height-body-text: {{ body_font_size | times: body_line_height | round }}px;
  	--line-height-body-text-ratio: {{ body_line_height }};
  	
  	/* Legacy H1-H6 Line Heights for Backward Compatibility */
  	--line-height-h1: {{ h1_font_size | times: h1_line_height | round }}px;
  	--line-height-h1-ratio: {{ h1_line_height }};
  	--line-height-h2: {{ h2_font_size | times: h2_line_height | round }}px;
  	--line-height-h2-ratio: {{ h2_line_height }};
  	--line-height-h3: {{ h3_font_size | times: h3_line_height | round }}px;
  	--line-height-h3-ratio: {{ h3_line_height }};
  	--line-height-h4: {{ h4_font_size | times: h4_line_height | round }}px;
  	--line-height-h4-ratio: {{ h4_line_height }};
  	--line-height-h5: {{ h5_font_size | times: h5_line_height | round }}px;
  	--line-height-h5-ratio: {{ h5_line_height }};
  	--line-height-h6: {{ h6_font_size | times: h6_line_height | round }}px;
  	--line-height-h6-ratio: {{ h6_line_height }};
  	
  	/* LETTER SPACING - New Three-Tier Typography System */
  	--letter-spacing-body: {{ body_letter_spacing }}px;
  	--letter-spacing-main-heading: {{ main_heading_letter_spacing }}px;
  	--letter-spacing-sub-heading: {{ sub_heading_letter_spacing }}px;
  	--letter-spacing-body-text: {{ body_letter_spacing }}px;
  	
  	/* Legacy H1-H6 Letter Spacing for Backward Compatibility */
  	--letter-spacing-h1: {{ h1_letter_spacing }}px;
  	--letter-spacing-h2: {{ h2_letter_spacing }}px;
  	--letter-spacing-h3: {{ h3_letter_spacing }}px;
  	--letter-spacing-h4: {{ h4_letter_spacing }}px;
  	--letter-spacing-h5: {{ h5_letter_spacing }}px;
  	--letter-spacing-h6: {{ h6_letter_spacing }}px;
  	
  	/* Legacy support */
  	--heading-letter-spacing: {{ settings.type_header_spacing | default: 0 }}px;

   --arrow-down-url: url({{ 'arrow-down.svg' | asset_url }});
   --arrow-down-white-url: url({{ 'arrow-down-white.svg' | asset_url }});
   --product-title-line-clamp: {{ settings.pcard_title_line_clamp }};

  	--spacing-sections-desktop: {{ settings.spacing_sections }}px;
   --spacing-sections-laptop: {{ settings.spacing_sections | times: 0.8 | round: 0 }}px;
   --spacing-sections-tablet: {{ settings.spacing_sections | times: 0.6 | round: 0 }}px;
   --spacing-sections-mobile: {{ settings.spacing_sections_mobile }}px;

  	/* LAYOUT */
  	--container-width: {{ settings.container_width }}px;
   --fluid-container-width: {{ settings.container_fluid_width }}px;
   --fluid-container-offset: {{ settings.container_fluid_offset }}px;
   /* CORNER RADIUS */
   --blocks-radius: {{ blocks_radius }}px;
   --medium-blocks-radius: {{ medium_blocks_radius }}px;
   --pcard-radius: {{ pcard_radius }}px;
  }
   {%- endcapture -%}

   {{ style | strip_newlines }}
{%- endstyle -%}

<link rel="stylesheet" href="{{ 'cart.css' | asset_url }}" media="print" onload="this.media='all'">
<noscript>{{ 'cart.css' | asset_url | stylesheet_tag }}</noscript>

{%- liquid
  echo 'vendor.css' | asset_url | stylesheet_tag
  if template contains 'customers/'
    echo 'customer.css' | asset_url | stylesheet_tag
  endif
  if template.suffix == 'about-us'
    echo 'about-us.css' | asset_url | stylesheet_tag
  endif
  if enable_rtl
    echo 'rtl.css' | asset_url | stylesheet_tag
  endif
  if shop.metafields.tcustomizer.config
    echo 'tpo-integration.css' | asset_url | stylesheet_tag
  endif
-%}
{%- if linklists['gift-wrapping'].links != blank and linklists['gift-wrapping'].links.first.type == 'product_link' -%}
  <link rel="stylesheet" href="{{ 'gift-wrapping.css' | asset_url }}" media="print" onload="this.media='all'">
  <noscript>{{ 'gift-wrapping.css' | asset_url | stylesheet_tag }}</noscript>
{%- endif -%}
<link rel="stylesheet" href="{{ 'custom-style.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'custom.css' | asset_url }}" media="print" onload="this.media='all'">
<noscript>{{ 'custom-style.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'custom.css' | asset_url | stylesheet_tag }}</noscript>

{%- style -%}
  {%- if custom_css != blank -%}
    {{ custom_css | strip_newlines }}
  {%- endif -%}
{%- endstyle -%}

{% if request.path == '/challenge' %}
  {% render 'customer-challenge-style' %}
{% endif %}

{% comment %} For init Product list of Recently product, Foxkit Related, Product recommendation {% endcomment %}
<script src="{{ 'product-list.js' | asset_url }}" defer="defer"></script>
